/*! angular-thickm 12-08-2014 */
!function(){"use strict";angular.module("thickm",["thickm.resource","thickm.collection","thickm.util"]),angular.module("thickm.resource",["thickm.collection","thickm.util"]),angular.module("thickm.resource").provider("resourceFactory",function(){function a(a){return a.success=function(b){return a.then(function(a){b(a)}),a},a.error=function(b){return a.then(null,function(a){b(a)}),a},a}var b=this;this.setBaseUrl=function(a){this.baseUrl=a},this.$get=function(c,d,e,f){function g(f){function g(){}var h=b.baseUrl+f;return g.prototype._primaryField="id",g._collectionClass=e,g.validate=function(){return!0},g.build=function(a){if(!this.validate(a))throw new Error("invalid item "+JSON.stringify(a));return new this(a)},g.transformCollectionResponse=function(a){return this._collectionClass.build(this,a)},g.transformItemResponse=function(a){return this.build(a.data)},g.query=function(b){var d=this,e=c.get(h,{params:b?b:null}).then(function(a){return d.transformCollectionResponse(a)});return a(e)},g.get=function(b,d){var e=this,f=c.get(h+"/"+b,{params:d?d:null}).then(function(a){return e.transformItemResponse(a)});return a(f)},g.prototype.isNew=function(){return!(this._primaryField in this&&angular.isDefined(this[this._primaryField]))},g.prototype.update=function(a){angular.extend(this,a)},g.prototype.save=function(){var b,d=this;return b=this.isNew()?c.post(h):c.put(h+"/"+this[this._primaryField]),b.then(function(a){d.update(a.data)}),a(b)},g.prototype.delete=function(){if(this.isNew()){var b=d.defer();return b.resolve({}),a(b.promise)}return c.delete(h+"/"+this[this._primaryField])},g}return g.baseUrl=b.baseUrl,g.resourceInit=function(a,b){var c=g(b);f.extend(a,c),angular.extend(a,c)},g}})}(window,document);